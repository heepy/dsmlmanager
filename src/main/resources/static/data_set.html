<html>

<head>
    <meta charset="UTF-8">
    <title>在线机器学习管理平台</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <meta name="description" content="Developed By M Abdur Rokib Promy">
    <meta name="keywords" content="Admin, Bootstrap 3, Template, Theme, Responsive">
    <!-- bootstrap 3.0.2 -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <!-- font Awesome -->
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- Ionicons -->
    <link href="css/ionicons.min.css" rel="stylesheet" type="text/css">
    <!-- Morris chart -->
    <link href="css/morris/morris.css" rel="stylesheet" type="text/css">
    <!-- jvectormap -->
    <link href="css/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css">
    <!-- Date Picker -->
    <link href="css/datepicker/datepicker3.css" rel="stylesheet" type="text/css">
    <!-- fullCalendar -->
    <!-- <link href="css/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" /> -->
    <!-- Daterange picker -->
    <link href="css/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css">
    <!-- iCheck for checkboxes and radio inputs -->
    <link href="css/iCheck/all.css" rel="stylesheet" type="text/css">
    <!-- bootstrap wysihtml5 - text editor -->
    <!-- <link href="css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" /> -->
    <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-table/bootstrap-table.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-table/bootstrap-table.min.css" rel="stylesheet" type="text/css">
    <!-- Theme style -->
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/imageLabel/edit.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/imageLabel/jquery.imageLabel.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
          <![endif]-->
    <style type="text/css">
    </style>
</head>

<body class="skin-black  pace-done">
    <!-- header logo: style can be found in header.less -->
    <header class="header">
        <a href="index.html" class="logo">
            在线机器学习管理平台
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top" role="navigation">
            <!-- Sidebar toggle button-->
            <a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas" role="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <div class="navbar-right">
                <ul class="nav navbar-nav">
                    <!-- Messages: style can be found in dropdown.less-->
                    <li class="dropdown messages-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-envelope"></i>
                            <span class="label label-success">4</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">You have 4 messages</li>
                            <li>
                                <!-- inner menu: contains the actual data -->
                                <div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 200px;">
                                    <ul class="menu" style="overflow: hidden; width: 100%; height: 200px;">
                                        <li>
                                            <!-- start message -->
                                            <a href="#">
                                                <div class="pull-left">
                                                    <img src="img/26115.jpg" class="img-circle" alt="User Image">
                                                </div>
                                                <h4>
                                                    Support Team
                                                </h4>
                                                <p>Why not buy a new awesome theme?</p>
                                                <small class="pull-right"><i class="fa fa-clock-o"></i> 5 mins</small>
                                            </a>
                                        </li><!-- end message -->
                                        <li>
                                            <a href="#">
                                                <div class="pull-left">
                                                    <img src="img/26115.jpg" class="img-circle" alt="user image">
                                                </div>
                                                <h4>
                                                    Director Design Team
                                                </h4>
                                                <p>Why not buy a new awesome theme?</p>
                                                <small class="pull-right"><i class="fa fa-clock-o"></i> 2 hours</small>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <div class="pull-left">
                                                    <img src="img/avatar.png" class="img-circle" alt="user image">
                                                </div>
                                                <h4>
                                                    Developers
                                                </h4>
                                                <p>Why not buy a new awesome theme?</p>
                                                <small class="pull-right"><i class="fa fa-clock-o"></i> Today</small>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <div class="pull-left">
                                                    <img src="img/26115.jpg" class="img-circle" alt="user image">
                                                </div>
                                                <h4>
                                                    Sales Department
                                                </h4>
                                                <p>Why not buy a new awesome theme?</p>
                                                <small class="pull-right"><i class="fa fa-clock-o"></i> Yesterday</small>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <div class="pull-left">
                                                    <img src="img/avatar.png" class="img-circle" alt="user image">
                                                </div>
                                                <h4>
                                                    Reviewers
                                                </h4>
                                                <p>Why not buy a new awesome theme?</p>
                                                <small class="pull-right"><i class="fa fa-clock-o"></i> 2 days</small>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="slimScrollBar" style="background: rgb(0, 0, 0); width: 3px; position: absolute; top: 0px; opacity: 0.4; display: block; border-radius: 5px; z-index: 99; right: 1px;"></div>
                                    <div class="slimScrollRail" style="width: 3px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 5px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div>
                                </div>
                            </li>
                            <li class="footer"><a href="#">See All Messages</a></li>
                        </ul>
                    </li>
                    <li class="dropdown tasks-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-tasks"></i>
                            <span class="label label-danger">9</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">You have 9 tasks</li>
                            <li>
                                <!-- inner menu: contains the actual data -->
                                <div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 200px;">
                                    <ul class="menu" style="overflow: hidden; width: 100%; height: 200px;">
                                        <li>
                                            <!-- Task item -->
                                            <a href="#">
                                                <h3>
                                                    Design some buttons
                                                    <small class="pull-right">20%</small>
                                                </h3>
                                                <div class="progress progress-striped xs">
                                                    <div class="progress-bar progress-bar-success" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                                                        <span class="sr-only">20% Complete</span>
                                                    </div>
                                                </div>
                                            </a>
                                        </li><!-- end task item -->
                                        <li>
                                            <!-- Task item -->
                                            <a href="#">
                                                <h3>
                                                    Create a nice theme
                                                    <small class="pull-right">40%</small>
                                                </h3>
                                                <div class="progress progress-striped xs">
                                                    <div class="progress-bar progress-bar-danger" style="width: 40%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                                                        <span class="sr-only">40% Complete</span>
                                                    </div>
                                                </div>
                                            </a>
                                        </li><!-- end task item -->
                                        <li>
                                            <!-- Task item -->
                                            <a href="#">
                                                <h3>
                                                    Some task I need to do
                                                    <small class="pull-right">60%</small>
                                                </h3>
                                                <div class="progress progress-striped xs">
                                                    <div class="progress-bar progress-bar-info" style="width: 60%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                                                        <span class="sr-only">60% Complete</span>
                                                    </div>
                                                </div>
                                            </a>
                                        </li><!-- end task item -->
                                        <li>
                                            <!-- Task item -->
                                            <a href="#">
                                                <h3>
                                                    Make beautiful transitions
                                                    <small class="pull-right">80%</small>
                                                </h3>
                                                <div class="progress progress-striped xs">
                                                    <div class="progress-bar progress-bar-warning" style="width: 80%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                                                        <span class="sr-only">80% Complete</span>
                                                    </div>
                                                </div>
                                            </a>
                                        </li><!-- end task item -->
                                    </ul>
                                    <div class="slimScrollBar" style="background: rgb(0, 0, 0); width: 3px; position: absolute; top: 0px; opacity: 0.4; display: block; border-radius: 5px; z-index: 99; right: 1px;"></div>
                                    <div class="slimScrollRail" style="width: 3px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 5px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div>
                                </div>
                            </li>
                            <li class="footer">
                                <a href="#">View all tasks</a>
                            </li>
                        </ul>
                    </li>
                    <!-- User Account: style can be found in dropdown.less -->
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-user"></i>
                            <span>159******123<i class="caret"></i></span>
                        </a>
                        <ul class="dropdown-menu dropdown-custom dropdown-menu-right">
                            <li class="dropdown-header text-center">账户</li>
                            <li><a href="#">
                                    <i class="fa fa-user" style="color: #000"></i>
                                    <span style="color: #000">用户中心</span></a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#">
                                    <i class="fa fa-ban" style="color: #000"></i>
                                    <span style="color: #000">登出</span></a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <div class="wrapper row-offcanvas row-offcanvas-left">
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="left-side sidebar-offcanvas">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <span class="app-sidebar_cat">模型中心</span>
                <ul class="sidebar-menu">
                    <li>
                        <a href="project.html">
                            <span>项目管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="index.html">
                            <span>模型管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="blank.html">
                            <span>项目管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="basic_form.html">
                            <span>模型中心</span>
                        </a>
                    </li>
                </ul>
                <span class="app-sidebar_cat">数据中心</span>
                <ul class="sidebar-menu">
                    <li class="active">
                        <a href="data_set.html">
                            <span>数据集管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="add_dataset.html">
                            <span>创建数据集</span>
                        </a>
                    </li>
                    <li>
                        <a href="image_list.html">
                            <span>图片列表</span>
                        </a>
                    </li>
                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>
        <aside class="right-side">
            <section class="content">
                <ul id="breadcrumb" class="app-breadcrumb app-workspace_top">
                    <li class="app-breadcrumb_li"><span>数据集管理</span>
                        <!---->
                    </li>
                </ul>
                <div class="col-xs-12">
                    <div class="col-lg-2">
                        <button class="s-button" id="s-button" style="margin-top: 20px;margin-bottom: 10px">创建数据集</button>
                    </div>
                </div>
                <div class="col-xs-12">
                    <table id="table_dateSet" style="border: 0px" class="my-table">
                    </table>
                </div>
            </section>
        </aside>
        <!-- /.box-body -->
        <div class="footer-main">
            Copyright © 在线机器学习平台, 2019
        </div>
    </div><!-- /.box -->
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <!-- jQuery UI 1.10.3 -->
    <script src="js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
    <!-- Bootstrap -->
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <!-- daterangepicker -->
    <script src="js/plugins/daterangepicker/daterangepicker.js" type="text/javascript"></script>
    <script src="js/plugins/chart.js" type="text/javascript"></script>
    <!-- datepicker
        <script src="js/plugins/datepicker/bootstrap-datepicker.js" type="text/javascript"></script>-->
    <!-- Bootstrap WYSIHTML5
        <script src="js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" type="text/javascript"></script>-->
    <!-- iCheck -->
    <script src="js/plugins/iCheck/icheck.min.js" type="text/javascript"></script>
    <!-- calendar -->
    <script src="js/plugins/fullcalendar/fullcalendar.js" type="text/javascript"></script>
    <!-- Director App -->
    <script src="js/Director/app.js" type="text/javascript"></script>
    <!-- Director dashboard demo (This is only for demo purposes) -->
    <script src="js/Director/dashboard.js" type="text/javascript"></script>
    <script src="js/plugins/bootstrap-table/bootstrap-table.js" type="text/javascript"></script>
    <script src="js/plugins/bootstrap-table/bootstrap-table.min.js" type="text/javascript"></script>
    <script src="js/plugins/bootstrap-table/bootstrap-table-zh-CN.js" type="text/javascript"></script>
    <script src="js/plugins/imageLabel/jquery.imageLabel.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/plugins/imageLabel/template.js"></script>
    <script src="plugin/control/js/message.js"></script>
    <!--bootbox -->
    <script type="text/javascript" src="js/plugins/bootbox/bootbox.all.min.js"></script>
    <script type="text/javascript" src="js/plugins/bootbox/bootbox.locales.min.js"></script>
    <script type="text/javascript" src="js/plugins/bootbox/bootbox.min.js"></script>
    <script language="javascript" type="text/javascript">
    $(document).ready(function() {
        $('#imageSet_Select').change(function() {
            alert($(this).children('option:selected').val());
            var p1 = $(this).children('option:selected').val(); //这就是selected的值  

        })
    })
    </script>
    <!-- Director for demo purposes -->
    <script type="text/javascript">
    $('input').on('ifChecked', function(event) {
        // var element = $(this).parent().find('input:checkbox:first');
        // element.parent().parent().parent().addClass('highlight');
        $(this).parents('li').addClass("task-done");
        console.log('ok');
    });
    $('input').on('ifUnchecked', function(event) {
        // var element = $(this).parent().find('input:checkbox:first');
        // element.parent().parent().parent().removeClass('highlight');
        $(this).parents('li').removeClass("task-done");
        console.log('not');
    });
    </script>
    <script type="text/javascript">
    (function($) {
        $.getUrlParam = function(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]);
            return null;
        }
    })(jQuery);
    var proId = 1;
    $('#table_dateSet').bootstrapTable('destroy');
    $('#table_dateSet').bootstrapTable({
        url: 'http://localhost:8080/dsml/dataset/getlist', //请求后台的URL（*）
        method: 'get', //请求方式（*）
        striped: true, //是否显示行间隔色
        cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
        pagination: true, //是否显示分页（*）
        sortable: false, //是否启用排序
        sortOrder: "asc", //排序方式

        queryParams: function(params) {
            var temp = { //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
                pagesize: params.limit, //页面大小
                currentpage: (params.offset / params.limit) + 1, //页码
                proId: proId
            };
            return temp;
        }, //传递参数（*）
        sidePagination: "server", //分页方式：client客户端分页，server服务端分页（*）
        pageNumber: 1, //初始化加载第一页，默认第一页
        pageSize: 8, //每页的记录行数（*）
        pageList: [8, 10, 15, 20], //可供选择的每页的行数（*）
        search: true, //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
        strictSearch: true,
        //是否显示所有的列
        showRefresh: false, //是否显示刷新按钮
        minimumCountColumns: 2, //最少允许的列数
        clickToSelect: true, //是否启用点击选中行
        smartDisplay: true,
        uniqueId: "id", //每一行的唯一标识，一般为主键列
        showToggle: false, //是否显示详细视图和列表视图的切换按钮
        cardView: false, //是否显示详细视图
        detailView: false,
        height: $(window).height() - 300,
        rowStyle: function(row, index) {
            //这里有5个取值代表5中颜色['active', 'success', 'info', 'warning', 'danger'];
            var strclass = "";
            if (row.status == 0) {
                strclass = 'success'; //还有一个active
            } else if (row.status == 1) {
                strclass = 'danger';
            } else if (row.status == 2) {
                strclass = 'warning';
            } else {
                return {};
            }
            return { classes: strclass }
        },
        columns: [{
                field: 'id',
                title: 'ID',
                width: '10%',
                align: "left"
            },
            {
                field: 'dataSetName',
                title: '数据集名称',
                width: '10%',
                align: "left"
            },
            {
                field: 'createTime',
                title: '创建时间',
                width: '20%',
                align: "left",
                formatter: function dateformat(str) {
                    if (str == null || str == "" || typeof(str) == "undefined") {
                        return "";
                    }
                    var now = new Date(str);
                    var year = now.getFullYear();
                    var month = (now.getMonth() + 1).toString();
                    var day = (now.getDate()).toString();

                    if (month.length == 1) {
                        month = "0" + month;
                    }
                    if (day.length == 1) {
                        day = "0" + day;
                    }
                    var dateTime = year + "年" + month + "月" + day + "日";
                    return dateTime;
                }
            },
            {
                field: 'imageTotal',
                title: '图片总数',
                width: '10%',
                align: "left"
            },
            {
                field: 'annotationTotal',
                title: '已标注数',
                width: '10%',
                align: "left"
            },
            {
                field: 'status',
                title: '状态',
                width: '10%',
                align: "left",
                formatter: function(value, row, index) {
                    if (row['status'] === 0) {
                        return '新建';
                    }
                    if (row['status'] === 1) {
                        return '未标注完';
                    }
                    if (row['status'] === 2) {
                        return '已标注完';
                    }
                    return value;
                }
            },

            {
                field: 'id',
                title: '操作',
                width: '20%',
                align: 'left',
                valign: 'middle',
                formatter: actionFormatter
            },

        ]
    });

    //操作栏的格式化
    function actionFormatter(ID, row, index) {
        var id = ID;
        var result = "";

        result += "<a href='javascript:;' class='btn btn-xs green' onclick=\"LookUpById('" + id + "')\" title='查看'>查看</a>";
        result += "<a href='javascript:;' class='btn btn-xs green' onclick=\"EditViewById('" + id + "')\" title='标注图片'>标注</a>";
        result += "<a href='javascript:;' class='btn btn-xs red' onclick=\"DeleteByIds('" + id + "')\" title='删除'>删除</a>";
        result += "<a href='javascript:;' class='btn btn-xs red' onclick=\"UploadByIds('" + id + "')\" title='上传'>上传</a>";


        return result;
    }
    </script>
    <script type="text/javascript">
    var resultId = "";

    function UploadByIds(id) {
        resultId = id;
        var baseHtml = '<div class="s-modal_bg">\n<div class="s-modal_wrapper"><div class="s-modal_main">\n<div class="s-modal_body"><div class="upload"><div class="s-modal_up_head">上传图片<div class="img-edit-toolbox"><div class="img-item"><a  href="javascript:void(0);" title="关闭" onclick="close_lable()"><img src="img/icon/close.png"/></a><div></div></div></div></div>\n</div></div>';
        var outHtml = $(baseHtml);

        outHtml.find(".upload").append("<div style='width:100%;height:100%'><iframe src=\"plugin/upload.html#" + id + "\" style='width:100%;height:100%'></iframe><div>");

        $("body").append(outHtml);

    }

    function LookUpById(id) {
        window.location.href = "image_list.html?dataSetId=" + id;
    }

    function DeleteByIds(id) {
        bootbox.confirm({
            size: "small",
            message: "您确定删除数据集吗？",
            title: "删除数据集",
            buttons: {
                confirm: {
                    label: '确定',
                    className: 'boot-button-confirm'
                },
                cancel: {
                    label: '取消',
                    className: 'boot-button-cancel'
                }
            },
            callback: function(result) {
                if (result) {
                    $.ajax({
                        method: "POST",
                        type: "POST",
                        url: 'http://localhost:8080/dsml/dataset/delete',
                        data: {
                            id: id
                        },
                        dataType: "json",
                        async: true,
                        success: function(res) {
                            $("#table_dateSet").bootstrapTable('refresh');
                        }
                    });
                }
            }
        });
    }
    </script>
    <script type="text/javascript">
    var imageLabel;
    var imgList; //图片列表
    var imgCurrentIndex = 0; //当前显示图片index;

    function EditViewById(id) {
        var imgAllList = new Array();
        var currentIndex = 1; //每当请求一次Index++

        showEditview();
        var result = getImageUrl(id, currentIndex);
        imgList = JSON.parse(result.responseText);
        addList(imgList);
        refreshImgEdit();
        refreshList();


    }

    function addList(imgList) { //根据urlList新建拼接图片列表

        var str = '';
        for (var i = 0; i < imgList.length; i++) {
            str += '<a href="javascript:void(0);" onclick="choose_img(' + i + ')" id="' + i + '">\n<div class="textbox">' + imgList[i].imgName + '</div>\n</a>\n';
        }
        var ext = $(str);
        $(".vertical-list").append(ext);
        return ext;
    }


    function getImageUrl(id, currentIndex) { //根据网络请求每次获得10张图片的信息  
        var result = $.ajax({
            method: "get",
            type: "get",
            url: 'http://localhost:8080/dsml/image/' + id + '/getlist',
            data: {

            },
            dataType: "json",
            async: false,
            success: function(res) {
                currentIndex++;
                return res;
            }
        });
        return result;
    }

    function refreshImgEdit() {
        $imageLabel = imageLabel({
            img: "http://localhost:8080/dsml/visit/" + imgList[imgCurrentIndex].src,
            editPop: true,
            close: function(t) {
                console.log(t);
                return false;
            },
            clickArea: function() {},
            edit: function(t) {},
            startArea: function() {},
            confirm: function(t) {
                console.log(t);
                return false;
            }
        })
    }

    function showEditview() {
        var showedit = '<div class="s-modal_bg">\n<div class="s-modal_wrapper"><div class="s-modal_main">\n<div class="s-modal_body">\n<div class="left">\n<div class="s-modal_head">标注图片</div>\n</div>\n<div class="right">\n<div class="s-modal_head">图片列表</div>\n</div>\n</div></div></div>';
        sd = $(showedit);
        var addtoolbox = '<div class="img-edit-toolbox">\n<div class="img-item">\n<a id="" href="javascript:void(0);" title="上一张" onclick="pre_img()"><img src="img/icon/pre_img.png"/></div><div class="img-item">\n<a href="javascript:void(0);" title="删除" id="delete_img" onclick="delete_img()"><img src="img/icon/delete.png"/></a>\n</div> \n<div class="img-item"> \n<a id="" href="javascript:void(0);" title="保存" id="save_lable" onclick="save_lable()"><img src="img/icon/save.png"/></a>\n</div><div class="img-item"><a  href="javascript:void(0);" title="关闭" onclick="close_lable()"><img src="img/icon/close.png"/></a></div><div class="img-item">\n<a id="" href="javascript:void(0);" title="下一张" onclick="next_img()"><img src="img/icon/next_img.png"/></a></div></div>';
        var at = $(addtoolbox);
        var addPicList = '<div class="s-modal_list">\n<div class="vertical-list"></div></div>';
        sd.find(".left").find(".s-modal_head").append(at);
        var apl = $(addPicList);
        sd.find(".right").append(apl);
        $("body").append(sd);
    }
    </script>
    <script type="text/javascript">
    function save_lable() {

        var data = { "id":imgList[imgCurrentIndex].id, "labels":$imageLabel.getData()};
        alert(JSON.stringify(data));
        console.log(JSON.stringify(data));
        $.ajax({
            method: "POST",
            type: "POST",
            url: 'http://localhost:8080/dsml/image/addlable',
            contentType: 'application/json',
            data: JSON.stringify(data),
            dataType: "json",
            async: false,
            success: function(res) {
                alert("标注成功");
            }
        });
    }
    function delete_img() {

    }

    function choose_img(i) {
        removeListClass();
        imgCurrentIndex = i;
        refreshList();
        refreshImgEdit();
    }

    function close_lable() {
        $("body").find(".s-modal_bg").remove();
        $("#table_dateSet").bootstrapTable('refresh');
    }

    function pre_img() {
        if (imgCurrentIndex == 0) {
            alert("已经是第一张了");
            return;
        }
        removeListClass();
        imgCurrentIndex--;
        refreshList();
        refreshImgEdit();

    }

    function refreshList() {
        $('.vertical-list').find("#" + imgCurrentIndex).addClass("active");
    }

    function removeListClass() {
        $('.vertical-list').find("#" + imgCurrentIndex).removeClass("active");
    }

    function next_img() {
        if (imgCurrentIndex == imgList.length - 1) {
            alert("已经是最后一张了");
            return;
        }
        removeListClass();
        imgCurrentIndex++;
        refreshList();
        refreshImgEdit();
    }
    </script>

</html>